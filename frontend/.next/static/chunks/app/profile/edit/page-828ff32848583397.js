(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[159],{3078:function(e,s,r){Promise.resolve().then(r.bind(r,9649))},9649:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return EditProfile}});var t=r(7437),a=r(2265),l=r(4033),n=r(1396),i=r.n(n),d=r(5093),c=r(3611),o=r(9598),m=r(5831),u=r(1465),x=r(2147),f=r(5718),h=r(7702),p=r(2851),g=r(4530),j=r(3067),v=r(7972),N=r(1295),b=r(2455),y=r(6637),w=r(6245);function EditProfile(){let e=(0,l.useRouter)(),{user:s,updateUser:r}=(0,d.useAuth)(),[n,k]=(0,a.useState)(!1),[C,S]=(0,a.useState)(!1),[Z,R]=(0,a.useState)(""),[I,A]=(0,a.useState)({name:"",email:"",skills:"",bio:"",avatar:""});(0,a.useEffect)(()=>{s&&A({name:s.name||"",email:s.email||"",skills:s.skills||"",bio:s.bio||"",avatar:s.avatar||""})},[s]);let handleSubmit=async t=>{if(t.preventDefault(),s){k(!0),R("");try{await new Promise(e=>setTimeout(e,1500)),r({...s,...I}),S(!0),setTimeout(()=>{e.push("/profile/".concat(s.id))},2e3)}catch(e){R("Произошла ошибка при сохранении профиля")}finally{k(!1)}}},handleChange=e=>{A({...I,[e.target.name]:e.target.value})};return s?C?(0,t.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center max-w-md mx-auto px-4",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-green-500 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg",children:(0,t.jsx)(g.Z,{className:"w-8 h-8 text-white"})}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-foreground mb-4",children:"Профиль обновлен!"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-6",children:"Ваш профиль успешно сохранен и обновлен"}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,t.jsx)(i(),{href:"/profile/".concat(s.id),children:(0,t.jsx)(c.z,{children:"Посмотреть профиль"})}),(0,t.jsx)(c.z,{variant:"outline",onClick:()=>S(!1),children:"Продолжить редактирование"})]})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)("div",{className:"border-b bg-background/95 backdrop-blur",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsx)(i(),{href:"/profile/".concat(s.id),children:(0,t.jsxs)(c.z,{variant:"ghost",className:"flex items-center space-x-2",children:[(0,t.jsx)(j.Z,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"Назад к профилю"})]})})})})}),(0,t.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,t.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,t.jsx)("div",{className:"lg:col-span-2",children:(0,t.jsxs)(o.Zb,{className:"border-0 shadow-lg",children:[(0,t.jsxs)(o.Ol,{children:[(0,t.jsxs)(o.ll,{className:"text-2xl flex items-center gap-2",children:[(0,t.jsx)(v.Z,{className:"w-6 h-6 text-primary"}),"Редактировать профиль"]}),(0,t.jsx)(o.SZ,{children:"Обновите информацию о себе, чтобы другие пользователи могли лучше вас узнать"})]}),(0,t.jsx)(o.aY,{children:(0,t.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-6",children:[Z&&(0,t.jsx)(f.bZ,{variant:"destructive",children:(0,t.jsx)(f.X,{children:Z})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(u.Label,{children:"Аватар"}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)(h.qE,{className:"w-20 h-20",children:[(0,t.jsx)(h.F$,{src:I.avatar,alt:I.name}),(0,t.jsx)(h.Q5,{className:"bg-primary text-primary-foreground text-2xl font-bold",children:I.name.charAt(0).toUpperCase()})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.I,{name:"avatar",value:I.avatar,onChange:handleChange,placeholder:"URL аватара",className:"w-full"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Вставьте ссылку на изображение для аватара"})]})]})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u.Label,{htmlFor:"name",children:"Имя *"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(v.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),(0,t.jsx)(m.I,{id:"name",name:"name",value:I.name,onChange:handleChange,required:!0,className:"pl-10",placeholder:"Ваше имя"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u.Label,{htmlFor:"email",children:"Email *"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(N.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),(0,t.jsx)(m.I,{id:"email",name:"email",type:"email",value:I.email,onChange:handleChange,required:!0,className:"pl-10",placeholder:"your@email.com"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u.Label,{htmlFor:"skills",children:"Навыки"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(b.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),(0,t.jsx)(m.I,{id:"skills",name:"skills",value:I.skills,onChange:handleChange,className:"pl-10",placeholder:"React, Node.js, TypeScript, Python..."})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Перечислите ваши навыки через запятую"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u.Label,{htmlFor:"bio",children:"О себе"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(y.Z,{className:"absolute left-3 top-3 text-muted-foreground w-4 h-4"}),(0,t.jsx)(x.g,{id:"bio",name:"bio",value:I.bio,onChange:handleChange,className:"pl-10 min-h-[120px] resize-none",placeholder:"Расскажите о себе, своем опыте и интересах..."})]}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:[I.bio.length,"/500 символов"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between pt-4",children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"* Обязательные поля"}),(0,t.jsx)(c.z,{type:"submit",disabled:n||!I.name.trim()||!I.email.trim(),className:"px-8",children:n?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-primary-foreground border-t-transparent rounded-full animate-spin mr-2"}),"Сохранение..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w.Z,{className:"w-4 h-4 mr-2"}),"Сохранить изменения"]})})]})]})})]})}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(o.Zb,{className:"border-0 shadow-lg",children:[(0,t.jsx)(o.Ol,{children:(0,t.jsx)(o.ll,{className:"text-lg",children:"Советы для профиля"})}),(0,t.jsxs)(o.aY,{className:"space-y-4 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(v.Z,{className:"w-4 h-4 text-primary mt-0.5 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-foreground mb-1",children:"Четкое имя"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Используйте настоящее имя для доверия"})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(b.Z,{className:"w-4 h-4 text-primary mt-0.5 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-foreground mb-1",children:"Актуальные навыки"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Укажите технологии, которыми владеете"})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(y.Z,{className:"w-4 h-4 text-primary mt-0.5 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-foreground mb-1",children:"Интересная биография"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Расскажите о своем опыте и целях"})]})]})]})]}),(0,t.jsxs)(o.Zb,{className:"border-0 shadow-lg",children:[(0,t.jsx)(o.Ol,{children:(0,t.jsx)(o.ll,{className:"text-lg",children:"Что видят другие?"})}),(0,t.jsxs)(o.aY,{className:"space-y-3 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-6 h-6 bg-primary/10 rounded-full flex items-center justify-center text-xs font-semibold text-primary",children:"1"}),(0,t.jsx)("span",{children:"Ваше имя и аватар"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-6 h-6 bg-primary/10 rounded-full flex items-center justify-center text-xs font-semibold text-primary",children:"2"}),(0,t.jsx)("span",{children:"Список навыков"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-6 h-6 bg-primary/10 rounded-full flex items-center justify-center text-xs font-semibold text-primary",children:"3"}),(0,t.jsx)("span",{children:"Биографию"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-6 h-6 bg-primary/10 rounded-full flex items-center justify-center text-xs font-semibold text-primary",children:"4"}),(0,t.jsx)("span",{children:"Ваши проекты"})]})]})]})]})]})})]}):(0,t.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center max-w-md mx-auto px-4",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-primary/80 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg",children:(0,t.jsx)(p.Z,{className:"w-8 h-8 text-primary-foreground"})}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-foreground mb-4",children:"Войдите в систему"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-6",children:"Для редактирования профиля необходимо войти в систему"}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,t.jsx)(i(),{href:"/login",children:(0,t.jsx)(c.z,{className:"w-full sm:w-auto",children:"Войти"})}),(0,t.jsx)(i(),{href:"/register",children:(0,t.jsx)(c.z,{variant:"outline",className:"w-full sm:w-auto",children:"Зарегистрироваться"})})]})]})})}},5718:function(e,s,r){"use strict";r.d(s,{X:function(){return o},bZ:function(){return d}});var t=r(7437),a=r(2265),l=r(6061),n=r(1628);let i=(0,l.j)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=a.forwardRef((e,s)=>{let{className:r,variant:a,...l}=e;return(0,t.jsx)("div",{ref:s,role:"alert",className:(0,n.cn)(i({variant:a}),r),...l})});d.displayName="Alert";let c=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("h5",{ref:s,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",r),...a})});c.displayName="AlertTitle";let o=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",r),...a})});o.displayName="AlertDescription"},7702:function(e,s,r){"use strict";r.d(s,{F$:function(){return d},Q5:function(){return c},qE:function(){return i}});var t=r(7437),a=r(2265),l=r(1769),n=r(1628);let i=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(l.fC,{ref:s,className:(0,n.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...a})});i.displayName=l.fC.displayName;let d=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(l.Ee,{ref:s,className:(0,n.cn)("aspect-square h-full w-full",r),...a})});d.displayName=l.Ee.displayName;let c=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(l.NY,{ref:s,className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...a})});c.displayName=l.NY.displayName},3611:function(e,s,r){"use strict";r.d(s,{z:function(){return c}});var t=r(7437),a=r(2265),l=r(7256),n=r(6061),i=r(1628);let d=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-primary/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,s)=>{let{className:r,variant:a,size:n,asChild:c=!1,...o}=e,m=c?l.g7:"button";return(0,t.jsx)(m,{className:(0,i.cn)(d({variant:a,size:n,className:r})),ref:s,...o})});c.displayName="Button"},9598:function(e,s,r){"use strict";r.d(s,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return n},aY:function(){return o},ll:function(){return d}});var t=r(7437),a=r(2265),l=r(1628);let n=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...a})});n.displayName="Card";let i=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...a})});i.displayName="CardHeader";let d=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("font-semibold leading-none tracking-tight",r),...a})});d.displayName="CardTitle";let c=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",r),...a})});c.displayName="CardDescription";let o=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",r),...a})});o.displayName="CardContent";let m=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",r),...a})});m.displayName="CardFooter"},5831:function(e,s,r){"use strict";r.d(s,{I:function(){return n}});var t=r(7437),a=r(2265),l=r(1628);let n=a.forwardRef((e,s)=>{let{className:r,type:a,...n}=e;return(0,t.jsx)("input",{type:a,className:(0,l.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:s,...n})});n.displayName="Input"},1465:function(e,s,r){"use strict";r.r(s),r.d(s,{Label:function(){return c}});var t=r(7437),a=r(2265),l=r(6743),n=r(6061),i=r(1628);let d=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(l.f,{ref:s,className:(0,i.cn)(d(),r),...a})});c.displayName=l.f.displayName},2147:function(e,s,r){"use strict";r.d(s,{g:function(){return n}});var t=r(7437),a=r(2265),l=r(1628);let n=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("textarea",{className:(0,l.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:s,...a})});n.displayName="Textarea"},5093:function(e,s,r){"use strict";r.r(s),r.d(s,{AuthProvider:function(){return AuthProvider},useAuth:function(){return useAuth}});var t=r(7437),a=r(2265);let l=(0,a.createContext)(void 0),AuthProvider=e=>{let{children:s}=e,[r,n]=(0,a.useState)(null),[i,d]=(0,a.useState)(null),[c,o]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e=localStorage.getItem("token"),s=localStorage.getItem("user");if(e&&s)try{d(e),n(JSON.parse(s))}catch(e){localStorage.removeItem("token"),localStorage.removeItem("user")}o(!1)},[]),(0,t.jsx)(l.Provider,{value:{user:r,token:i,login:(e,s)=>{d(e),n(s),localStorage.setItem("token",e),localStorage.setItem("user",JSON.stringify(s))},logout:()=>{d(null),n(null),localStorage.removeItem("token"),localStorage.removeItem("user")},updateUser:e=>{n(e),localStorage.setItem("user",JSON.stringify(e))},isLoading:c},children:s})},useAuth=()=>{let e=(0,a.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},1628:function(e,s,r){"use strict";r.d(s,{cn:function(){return cn}});var t=r(7042),a=r(4769);function cn(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];return(0,a.m6)((0,t.W)(s))}}},function(e){e.O(0,[660,326,981,971,472,744],function(){return e(e.s=3078)}),_N_E=e.O()}]);